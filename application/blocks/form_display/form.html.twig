<div class="dynamic-form-container relative">

  <div class="d-flex">
    {{ form_start(form, form.vars.attr|merge({
      attr: {
        "id": "dynamic-form-" ~ bID,
        "data-action": action,
        "data-dynamic-form-id": bID,
        "data-success-message": form_object.getSuccessMessage(),
        "class": "dynamic-form w-100",
        "novalidate": novalidate,
        "enctype": "multipart/form-data",
        "data-inline-errors": true
      }
    })) }}

    {# <span class="loading-indicator"><i class="fa fa-gear fa-spin"></i></span> #}

    <div class="fake-position">
      <div class="dynamic-form-response-container-position" id="dynamic-form-response-container-position-{{ bID }}"></div>
    </div>

    <div class="form-response">
      {{ form_errors(form) }}
    </div>

    <div class="row">
      {% for child in form.fields -%}
        {% if not child.rendered %}
          <div class="form-group {{ child.vars.attr.wrapper_size }}" data-field-name="{{ child.vars.name }}">
            {% if options.hide_labels != true and child.vars.block_prefixes.1 != "hidden" %}
              {{ form_label(child) }}
              {% if child.vars.required %}<span>*</span>{% endif %}
            {% endif %}
            {{ form_widget(child) }}
          </div>
        {% endif %}
      {%- endfor %}
    </div>

    <div class="d-flex align-items-center justify-content-between">
      <div>
        {% if form.agreePrivacyPolicy is defined or form.requireTermsAndConditions is defined %}
          <div class="form-group mb-0" data-field-name="agreePrivacyPolicy">
            {% if form.agreePrivacyPolicy is defined %}
              <div class="form-check checkbox-skin">
                <input id="form-{{ bID }}_agreePrivacyPolicy" name="form-{{ bID }}[agreePrivacyPolicy]" required="required" label="{{ form.agreePrivacyPolicy.vars.attr.label }}" value="1" type="checkbox">
                <label for="form-{{ bID }}_agreePrivacyPolicy" class="form-check-label">
                  {{ form.agreePrivacyPolicy.vars.attr.label }}
                  {%  if options.privacy_policy_link %}
                    <a target="_blank" href="{{ options.privacy_policy_link }}">{{ form.privacyPolicyFileId.vars.attr.label }}</a>
                  {% endif %} *
                </label>
              </div>
            {% endif %}
            {% if form.requireTermsAndConditions is defined %}
              <div class="form-check checkbox-skin">
                <input id="form-{{ bID }}_requireTermsAndConditions" name="form-{{ bID }}[requireTermsAndConditions]" required="required" label="{{ form.requireTermsAndConditions.vars.attr.label }}" value="1" type="checkbox">
                <label for="form-{{ bID }}_requireTermsAndConditions" class="form-check-label">
                  {{ form.requireTermsAndConditions.vars.attr.label }}
                  {% if options.privacy_policy_link %}
                    <a target="_blank" href="{{ options.terms_and_conditions_link }}">{{ form.termsAndConditionsFileId.vars.attr.label }}</a>
                  {% endif %} *
                </label>
              </div>
            {% endif %}
          </div>
          {{ form_widget(form.privacyPolicyFileId) }}
          {{ form_widget(form.privacyPolicyFileVersionId) }}
        {% endif %}

        {% if options.is_protected_by_recaptcha == true %}
          <div class="info-form-captcha">
            <p>{{ 'form.label.protected_by_recaptcha' | t }}</p>
          </div>
        {% endif %}
      </div>

      <div>
        {{ form_widget(form.submit, {attr: {class: "g-recaptcha"}}) }}
      </div>
    </div>


    {{ form_widget(form._token) }}

    {{ form_end(form, {render_rest: false}) }}
  </div>

</div>
